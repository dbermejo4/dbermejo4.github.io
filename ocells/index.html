<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.10.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.10.0/addons/p5.sound.min.js"></script>
    <title>Pac-Man Game</title>
    <style>
      body {
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background-color: #f4f7fc;
        color: #333;
      }

      .navbar {
        background-color: #5C6BC0;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .navbar-brand {
        font-size: 1.5rem;
        color: #fff;
        font-weight: 600;
        transition: color 0.3s;
      }

      .navbar-brand:hover {
        color: #FF4081;
      }

      .navbar-nav .nav-link {
        color: #fff;
        font-size: 1.1rem;
        font-weight: 500;
        padding: 10px 20px;
        border-radius: 5px;
        transition: background-color 0.3s;
      }

      .navbar-nav .nav-link:hover {
        background-color: #FF4081;
        color: white;
      }

      /* Responsividad */
      @media (max-width: 768px) {
        .navbar-brand {
          font-size: 1.4rem;
        }
      }

      #p5-canvas-container {
        margin-top: 20px;
      }
    </style>
  </head>

  <body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Pac-Man Game</a>
      </div>
    </nav>

    <!-- Contenido principal -->
    <div class="content-container text-center">
      <h1>Welcome to Pac-Man Game</h1>
      <p>Use the arrow keys to control Pac-Man and avoid the ghosts!</p>
    </div>

    <!-- Contenedor para el canvas de p5.js -->
    <div id="p5-canvas-container"></div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

    <!-- Script de p5.js -->
    <script>
      let pacman;
      let ghosts = [];
      let walls = [];
      let gridSize = 20;
      let pacmanSize = 40;
      
      function setup() {
        let canvas = createCanvas(windowWidth, windowHeight);
        canvas.parent('p5-canvas-container'); // Colocamos el canvas dentro del contenedor
        pacman = new PacMan(width / 2, height / 2);
        
        // Crear fantasmas
        for (let i = 0; i < 4; i++) {
          ghosts.push(new Ghost(random(width), random(height)));
        }
        
        // Crear paredes
        createWalls();
      }
      
      function draw() {
        background(0);
        pacman.update();
        pacman.show();

        // Mostrar fantasmas
        for (let ghost of ghosts) {
          ghost.update();
          ghost.show();
        }

        // Mostrar paredes
        for (let wall of walls) {
          wall.show();
        }
      }
      
      function keyPressed() {
        if (keyCode === LEFT_ARROW) {
          pacman.setDirection(-1, 0);
        } else if (keyCode === RIGHT_ARROW) {
          pacman.setDirection(1, 0);
        } else if (keyCode === UP_ARROW) {
          pacman.setDirection(0, -1);
        } else if (keyCode === DOWN_ARROW) {
          pacman.setDirection(0, 1);
        }
      }

      function createWalls() {
        // Crear las paredes como rectÃ¡ngulos
        walls.push(new Wall(0, 0, width, 20)); // Top
        walls.push(new Wall(0, height - 20, width, 20)); // Bottom
        walls.push(new Wall(0, 0, 20, height)); // Left
        walls.push(new Wall(width - 20, 0, 20, height)); // Right

        // Paredes internas
        walls.push(new Wall(100, 100, 200, 20));
        walls.push(new Wall(100, 100, 20, 200));
        walls.push(new Wall(300, 100, 20, 200));
        walls.push(new Wall(100, 300, 200, 20));
      }

      class PacMan {
        constructor(x, y) {
          this.pos = createVector(x, y);
          this.vel = createVector(0, 0);
          this.size = pacmanSize;
        }

        setDirection(x, y) {
          this.vel.set(x, y);
        }

        update() {
          this.pos.add(this.vel);
          this.pos.x = constrain(this.pos.x, 0, width - this.size);
          this.pos.y = constrain(this.pos.y, 0, height - this.size);
        }

        show() {
          fill(255, 255, 0);
          noStroke();
          arc(this.pos.x, this.pos.y, this.size, this.size, radians(45), radians(315), PIE);
        }
      }

      class Ghost {
        constructor(x, y) {
          this.pos = createVector(x, y);
          this.vel = createVector(random(-1, 1), random(-1, 1));
          this.size = 30;
        }

        update() {
          this.pos.add(this.vel);
          
          // Rebotar los fantasmas dentro de las paredes
          if (this.pos.x < 0 || this.pos.x > width) {
            this.vel.x *= -1;
          }
          if (this.pos.y < 0 || this.pos.y > height) {
            this.vel.y *= -1;
          }
        }

        show() {
          fill(255, 0, 0);
          noStroke();
          ellipse(this.pos.x, this.pos.y, this.size);
        }
      }

      class Wall {
        constructor(x, y, w, h) {
          this.pos = createVector(x, y);
          this.w = w;
          this.h = h;
        }

        show() {
          fill(0, 0, 255);
          noStroke();
          rect(this.pos.x, this.pos.y, this.w, this.h);
        }
      }
    </script>

  </body>
</html>
